<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Leado.ai ‚Äì Smart Form Automation</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body {
  background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
  color: #e0e0e0;
  font-family: 'Inter', sans-serif;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 40px;
}
.container {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(12px);
  border-radius: 20px;
  padding: 40px;
  max-width: 900px;
  width: 100%;
  box-shadow: 0 8px 30px rgba(0,0,0,0.6);
}
h2 {
  font-size: 2.2rem;
  font-weight: 600;
  margin-bottom: 25px;
  background: linear-gradient(90deg,#f8d49d,#f7e7ce);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
textarea, input, select {
  width: 100%;
  margin: 12px 0;
  padding: 14px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.2);
  background: rgba(255,255,255,0.05);
  color: #f5f5f5;
  font-size: 16px;
}
textarea:focus, input:focus, select:focus {
  outline: none;
  border-color: #f8d49d;
  box-shadow: 0 0 8px rgba(248,212,157,0.4);
}
button {
  margin-top: 10px;
  padding: 14px 28px;
  border: none;
  border-radius: 12px;
  background: linear-gradient(90deg,#f8d49d,#f7e7ce);
  color: #1a1a1a;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}
button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(248,212,157,0.4);
}
#resultTable {
  margin-top: 25px;
  border-radius: 15px;
  overflow: hidden;
}
table {
  width: 100%;
  border-collapse: collapse;
  color: #f5f5f5;
}
th, td {
  padding: 14px;
  text-align: left;
}
th { background: rgba(255,255,255,0.08); font-weight: 500; }
tr:nth-child(even) { background: rgba(255,255,255,0.03); }
.progress {
  height: 8px;
  border-radius: 5px;
  background: rgba(255,255,255,0.15);
  overflow: hidden;
}
.progress-bar {
  background: linear-gradient(90deg, #f8d49d, #f7e7ce);
  animation: progress-stripes 1.5s linear infinite;
}
@keyframes progress-stripes {
  from { background-position: 0 0; }
  to { background-position: 40px 0; }
}
.status-success { color: #8fffbc; font-weight: 500; }
.status-error { color: #ff7b7b; font-weight: 500; }

/* Login section styling */
#loginContainer {
  text-align: center;
  width: 100%;
}
#loginContainer input {
  max-width: 350px;
  margin: 10px auto;
  display: block;
}
#dashboard { display: none; }
</style>
</head>
<body>

<!-- LOGIN PANEL -->
<div class="container" id="loginContainer">
  <h2>üîê Leado.ai Admin Login</h2>
  <p style="color:#cfcfcf;">Please enter your admin credentials to continue</p>
  <input type="email" id="loginEmail" placeholder="Email">
  <input type="password" id="loginPassword" placeholder="Password">
  <button onclick="handleLogin()">Login</button>
  <p id="loginError" style="color:#ff7b7b; margin-top:10px;"></p>
</div>

<!-- MAIN DASHBOARD -->
<div class="container text-center" id="dashboard">
  <h2>Leado.ai ‚Äì Smart Contact Form Automation</h2>
  <p class="mb-4" style="color:#cfcfcf;">Automate bulk contact form submissions with AI-crafted personalized messages</p>
  
  <textarea id="urls" rows="6" placeholder="Enter target URLs, one per line"></textarea>
  <input type="text" id="name" placeholder="Full Name">
  <input type="email" id="email" placeholder="Your Email">
  <input type="text" id="phone" placeholder="Phone Number">
  
  <select id="service">
      <option value="">Select Service</option>
      <option value="SEO">SEO Services</option>
      <option value="App Development">App Development</option>
      <option value="Website Development">Website Development</option>
      <option value="Digital Marketing">Digital Marketing</option>
  </select>
  
  <textarea id="message" rows="3" placeholder="Custom message for contact forms"></textarea>
  <button onclick="submitForm()">üöÄ Launch Campaign</button>

  <div id="resultTable">
      <table>
          <thead><tr><th>Website</th><th>Status</th></tr></thead>
          <tbody id="statusBody"></tbody>
      </table>
  </div>
</div>

<script>
/* --- LOGIN LOGIC --- */
function handleLogin() {
  const email = document.getElementById('loginEmail').value.trim();
  const pass = document.getElementById('loginPassword').value.trim();
  const error = document.getElementById('loginError');
  if (email === 'super@admin.com' && pass === 'admin') {
    localStorage.setItem('leadoAuth', 'true');
    document.getElementById('loginContainer').style.display = 'none';
    document.getElementById('dashboard').style.display = 'block';
  } else {
    error.textContent = 'Invalid email or password';
  }
}

// Auto-login if stored
window.addEventListener('load', () => {
  if (localStorage.getItem('leadoAuth') === 'true') {
    document.getElementById('loginContainer').style.display = 'none';
    document.getElementById('dashboard').style.display = 'block';
  }
});

/* --- DASHBOARD FUNCTIONALITY --- */
let statusMap = {};

function submitForm() {
  const urls = document.getElementById('urls').value.split('\n').map(u => u.trim()).filter(u => u);
  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const phone = document.getElementById('phone').value;
  const service = document.getElementById('service').value;
  const message = document.getElementById('message').value;

  document.getElementById('statusBody').innerHTML = '';
  statusMap = {};

  urls.forEach(url => {
      const row = document.createElement('tr');
      row.innerHTML = `
          <td>${url}</td>
          <td>
            <div class="progress">
              <div class="progress-bar progress-bar-striped progress-bar-animated" style="width:50%"></div>
            </div>
          </td>`;
      document.getElementById('statusBody').appendChild(row);
      statusMap[url] = row;
  });

  const params = new URLSearchParams({ urls: urls.join(','), name, email, phone, service, message });
  const evtSource = new EventSource(`/fill?${params.toString()}`);

  evtSource.onmessage = function(event) {
      const data = JSON.parse(event.data);
      const url = data.url;
      const status = data.status;
      if (statusMap[url]) {
          let cell = statusMap[url].cells[1];
          if (status.includes("‚úì")) {
              cell.innerHTML = `<span class="status-success">‚úî ${status}</span>`;
          } else if (status.toLowerCase().includes("x") || status.toLowerCase().includes("error")) {
              cell.innerHTML = `<span class="status-error">‚úñ ${status}</span>`;
          } else {
              cell.innerHTML = `<span style="color:#f8d49d;">${status}</span>`;
          }
      }
  };

  evtSource.addEventListener("done", e => evtSource.close());
  evtSource.onerror = e => { console.error("SSE connection error:", e); evtSource.close(); };
}
</script>
</body>
</html>
